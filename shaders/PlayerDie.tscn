[gd_scene load_steps=4 format=2]

[ext_resource path="res://image/0x72/frames/knight_f_run_anim_f1.png" type="Texture" id=1]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;
uniform vec2 direction=vec2(0.0f,0.5f);
uniform float offset:hint_range(0.0f,0.2f);
uniform float fade:hint_range(0.0f,1.0f);
uniform float strip=4.0f;

void fragment() {
	vec2 norm=normalize(direction);
	vec2 pixels=SCREEN_UV/SCREEN_PIXEL_SIZE;
	vec2 pdir=vec2(norm.y,-norm.x);
	vec2 corrected_uv=UV+((float(int(dot(pdir,pixels)/strip)&0x1)*2.0f)-1.0f)*offset*pdir;
	vec4 color=texture(TEXTURE,corrected_uv);
	color.a*=clamp(1.0f-offset/fade,0.0f,1.0f);
	COLOR=color;
}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )
shader_param/direction = Vector2( 0, 0.5 )
shader_param/offset = 0.2
shader_param/fade = 1.0
shader_param/strip = 3.0

[node name="PlayerDieEffect" type="Sprite"]
material = SubResource( 2 )
texture = ExtResource( 1 )
offset = Vector2( 0, 1 )
flip_v = true
